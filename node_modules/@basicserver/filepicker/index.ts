import { Stage, State } from '@frugal-ui/base';
import { Clipboard } from './Data/Clipboard';
import { DirectoryItemTypes } from './Data/DirectoryItem';
import { SelectedItem } from './Data/SelectedItem';
import { DirectoryScene } from './DirectoryScene/DirectoryScene';

export { SelectedItem } from './Data/SelectedItem';
export { DirectoryItemTypes } from './Data/DirectoryItem';

// Main
export const listUpdater = new State(null);
export function updateLists() {
	listUpdater.triggerAll();
}

export default function FilePicker(
	rootName: string,
	initialPath: string,
	selectedItem: SelectedItem,
	allowedTypes: DirectoryItemTypes[],
) {
	const clipboard: Clipboard = { name: new State(''), path: new State('') };

	return Stage(DirectoryScene, {
		rootName,
		isFirst: true,
		path: initialPath,
		selectedItem,
		allowedTypes,
		clipboard,
	});
}
